<?xml version="1.0" encoding="utf-8"?>

<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="daadbot">

  <xacro:arg name="is_sim" default="true"/>

  <xacro:arg name = "is_ignition" default="true"/>

  <xacro:include filename = "$(find daadbot_desc)/urdf/urdf_inverted_pos_forw_bottle/daadbot_gazebo.xacro"/>
  <xacro:include filename = "$(find daadbot_desc)/urdf/urdf_inverted_pos_forw_bottle/daadbot_ros2_control.xacro"/>


  <xacro:property name='PI' value='3.141592653589793'/>
  <xacro:property name='velocity' value='1.0'/>
  <xacro:property name='effort' value='200.0'/>

  <link name="world"/>

   

  <!-- Attach Daadbot to the Table -->
  <joint name="base_joint" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
    <origin xyz="0.005 0.1725 1.24" rpy="0 3.14 1.57"/> <!-- Adjust position of the robot on the table -->
    <!-- For inverted - I have changed rpy to 0 3.14 0 from rpy = 0 0 0 -->
  </joint>

  <link
    name="base_link">
    <inertial>
      <origin
        xyz="-0.00246645540256236 -0.00131466478904116 0.00320374562257973"
        rpy="0 0 0" />
      <mass
        value="6.91122989464636" />
      <inertia
        ixx="0.0466171750852481"
        ixy="0.00010076855342015"
        ixz="5.14819747192778E-08"
        iyy="0.0464821203083076"
        iyz="-1.44621889265211E-07"
        izz="0.0929840869855057" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/base_link.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/base_link.STL" />
      </geometry>
    </collision>
  </link>
  <link
    name="Link_1">
    <inertial>
      <origin
        xyz="0.0222146013900772 2.73568109690481E-06 0.0747841784291177"
        rpy="0 0 -3.14" />
      <mass
        value="2.34948803406793" />
      <inertia
        ixx="0.00332922517000865"
        ixy="1.64875308454708E-07"
        ixz="-0.000433929392474112"
        iyy="0.00524724735039028"
        iyz="2.38505609352415E-07"
        izz="0.00419520671173006" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_1.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "0.329 0.322 0.302 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_1.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint_1"
    type="revolute">
    <origin
      xyz="-0.0029638 -0.0015759 0.04796"
      rpy="0 0 3.14159" />
    <parent
      link="base_link" />
    <child
      link="Link_1" />
    <axis
      xyz="0 0 -1" />
    <limit
      lower="-0.1"
      upper="3.2"
      effort="${effort}"
      velocity="${velocity}" />
  </joint>
  <gazebo reference="joint_1">
  <sensor name="ft_sensor_joint_1" type="force_torque">
    <always_on>true</always_on>
    <update_rate>1000</update_rate>
    <force_torque>
      <frame>child</frame>
      <measure_direction>child_to_parent</measure_direction>
    </force_torque>
    <pose>0 0 0 0 0 0</pose>
  </sensor>
</gazebo>
  <link
    name="Link_2">
    <inertial>
      <origin
        xyz="0.121210588587965 0.000230649813345946 -0.049540637756618"
        rpy="0 0 0" />
      <mass
        value="2.24401700155026" />
      <inertia
        ixx="0.00389001580470153"
        ixy="1.8291659115195E-06"
        ixz="2.04233321611583E-07"
        iyy="0.00259728697678572"
        iyz="3.29392581309982E-08"
        izz="0.00312685277067708" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_2.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_2.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint_2"
    type="revolute">
    <origin
      xyz="0.0400000000000002 -0.050000000000002 0.114463048454132"
      rpy="1.57 -1.57 0" />
    <parent
      link="Link_1" />
    <child
      link="Link_2" />
    <axis
      xyz="0 0 -1" />
    <limit
      lower="-3.4907"
      upper="3.5236"
      effort="${effort}"
      velocity="${velocity}" />
    <sensor name="force_torque" type="force_torque">
          <update_rate>30</update_rate>
    </sensor>
  </joint>
  
  <link
    name="Link_3">
    <inertial>
      <origin
        xyz="-0.00448997206818821 -2.34751712904213E-05 0.0488571768392556"
        rpy="0 0 0" />
      <mass
        value="1.2718719681393" />
      <inertia
        ixx="0.00206983011422612"
        ixy="9.27500479472452E-08"
        ixz="3.38378548754623E-06"
        iyy="0.00129565231901482"
        iyz="2.88989653562542E-07"
        izz="0.00156994991003151" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_3.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "0.329 0.322 0.302 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_3.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint_3"
    type="revolute">
    <origin
      xyz="0.234499999999998 0 -0.0495000000000002"
      rpy="0 1.5707963267949 0" />
    <parent
      link="Link_2" />
    <child
      link="Link_3" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-3.2"
      upper="3.2"
      effort="${effort}"
      velocity="${velocity}" />
  </joint>
  <link
    name="Link_4">
    <inertial>
      <origin
        xyz="-0.119169680650385 -0.000128811902195713 0.0378163924527294"
        rpy="0 0 0" />
      <mass
        value="2.67615775175726" />
      <inertia
        ixx="0.00308017562479927"
        ixy="2.47453551729311E-06"
        ixz="-7.09348932448939E-07"
        iyy="0.00238129778603005"
        iyz="-7.47320677385655E-07"
        izz="0.00293128138362422" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_4.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_4.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint_4"
    type="revolute">
    <origin
      xyz="-0.0324999999999996 0 0.0750000000000004"
      rpy="0 1.5707963267949 0" />
    <parent
      link="Link_3" />
    <child
      link="Link_4" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-3.9199"
      upper="1.9199"
      effort="${effort}"
      velocity="${velocity}" />
  </joint>
  <link
    name="Link_5">
    <inertial>
      <origin
        xyz="0.00685541523757274 3.79292913340323E-05 0.0488580132405974"
        rpy="3.14 0 0" />
      <mass
        value="1.29018300951353" />
      <inertia
        ixx="0.00112308173661534"
        ixy="1.28316182440177E-06"
        ixz="-8.91005390036956E-07"
        iyy="0.000690097277055795"
        iyz="-3.23958303943101E-07"
        izz="0.000815216487439054" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_5.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "0.329 0.322 0.302 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_5.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint_5"
    type="revolute">
    <origin
      xyz="-0.2284999036789 0 0.0330000000000004"
      rpy="3.14159265358979 1.5707963267949 0" />
    <parent
      link="Link_4" />
    <child
      link="Link_5" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-3.4"
      upper="3.4"
      effort="15"
      velocity="${velocity}" />
  </joint>
  <link
    name="Link_6">
    <inertial>
      <origin
        xyz="-0.0534048711825299 4.35092388909042E-05 0.0268001409986631"
        rpy="0 0 0" />
      <mass
        value="1.30596061805535" />
      <inertia
        ixx="0.000961791856097317"
        ixy="1.00752377127578E-06"
        ixz="-2.55794494605017E-06"
        iyy="0.000676134530899485"
        iyz="-2.71811927605635E-06"
        izz="0.00084422746855334" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/link_6.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/link_6.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint_6"
    type="revolute">
    <origin
      xyz="-0.0265000104908596 0 0.0575000000000075"
      rpy="-1.57 1.57 -1.57" />
    <parent
      link="Link_5" />
    <child
      link="Link_6" />
    <axis
      xyz="0 0 1" />
    <limit
      lower="-1.5708"
      upper="1.5708"
      effort="15"
      velocity="${velocity}" />
  </joint>
  <link
    name="Link_7">
    <inertial>
      <origin
        xyz="-1.22738236721376E-06 1.16355040356286E-05 -0.00396913177271019"
        rpy="0 0 0" />
      <mass
        value="0.131686510129341" />
      <inertia
        ixx="6.91193962095496E-05"
        ixy="1.32697088081543E-10"
        ixz="8.85654326869473E-10"
        iyy="6.91388743027247E-05"
        iyz="2.09447730326603E-11"
        izz="0.000136853375303708" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_7.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.329 0.322 0.302 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/Link_7.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="joint_7"
    type="revolute">
    <origin
      xyz="-0.0864999036793499 0 0.0280000000004628"
      rpy="0 1.5707963267949 0" />
    <parent
      link="Link_6" />
    <child
      link="Link_7" />
    <axis
      xyz="0 0 -1" />
    <limit
      lower="-3.2"
      upper="3.14"
      effort="15"
      velocity="${velocity}" />
  </joint>
  <link
    name="endeffector">
    <inertial>
      <origin
        xyz="0.0115230217195728 -0.0136127070797983 0.0256571894660979"
        rpy="0 0 0" />
      <mass
        value="0.154057788286255" />
      <inertia
        ixx="3.1964247663854E-05"
        ixy="1.07138220152465E-07"
        ixz="4.30086683390955E-12"
        iyy="2.53636526523542E-05"
        iyz="-9.8230347105402E-08"
        izz="4.73802906093003E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/end_effector.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba= "1 1 1 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/end_effector.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="endeffector_joint"
    type="fixed">
    <origin
      xyz="0 0 -0.00799999999954315"
      rpy="3.14159265357033 0 -1.57" />
    <parent
      link="Link_7" />
    <child
      link="endeffector" />
    <axis
      xyz="0 0 0" />
  </joint>
  <link
    name="right_claw">
    <inertial>
      <origin
        xyz="-0.0081697441800309 -0.0607308656339796 -0.0228000798504983"
        rpy="0 0 0" />
      <mass
        value="0.0895360179661208" />
      <inertia
        ixx="7.2886347080343E-05"
        ixy="1.41952254435033E-06"
        ixz="-1.32187343610579E-20"
        iyy="4.80785405134686E-06"
        iyz="5.93223528463108E-20"
        izz="7.68057042776624E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/right_claw.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.2 0.2 0.2 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/right_claw.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="right_gear_joint"
    type="revolute">
    <origin
      xyz="-0.01125 0.0249842558928188 0.025"
      rpy="-1.5707963267949 0 0.0" />
    <parent
      link="endeffector" />
    <child
      link="right_claw" />
    <axis
      xyz="0 0 -1" />
    <limit
      lower="0"
      upper="1.57"
      effort="${effort}"
      velocity="${velocity}" />
  </joint>
  <link
    name="left_claw">
    <inertial>
      <origin
        xyz="0.00821104998160883 -0.0610215268643555 -0.0229106636819238"
        rpy="0 0 0" />
      <mass
        value="0.089101484866654" />
      <inertia
        ixx="7.33450235726248E-05"
        ixy="-1.36237455721774E-06"
        ixz="-2.13058446114809E-20"
        iyy="4.81174919329427E-06"
        iyz="1.39075390131746E-19"
        izz="7.72705445867122E-05" />
    </inertial>
    <visual>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/left_claw.STL" />
      </geometry>
      <material
        name="">
        <color
          rgba="0.2 0.2 0.2 1" />
      </material>
    </visual>
    <collision>
      <origin
        xyz="0 0 0"
        rpy="0 0 0" />
      <geometry>
        <mesh
          filename="package://daadbot_desc/meshes/left_claw.STL" />
      </geometry>
    </collision>
  </link>
  <joint
    name="left_gear_joint"
    type="revolute">
    <origin
      xyz="0.01125 0.0249842558928188 0.025"
      rpy="-1.5707963267949 0 0" />
    <parent
      link="endeffector" />
    <child
      link="left_claw" />
    <axis
      xyz="0 0 -1" />
    <limit
      lower="-1.57"
      upper="0"
      effort="${effort}"
      velocity="${velocity}" />
    <mimic
      joint="right_gear_joint"
      multiplier="-1"
      offset="0" />
  </joint>
</robot>